<div class="resume-form-container">
  <h2>{{ currentResume ? 'Update Resume' : 'Create Resume' }}</h2>

  <button type="button" (click)="toggleForm()">
    {{ showForm ? 'Cancel' : 'Edit Resume' }}
  </button>
  <button (click)="deleteResume()" *ngIf="currentResume">
    Delete Resume
  </button>

  <form *ngIf="showForm" [formGroup]="resumeForm" (ngSubmit)="onSubmit()">
    <div formGroupName="personalInfo">
      <label for="name">Name</label>
      <input type="text" id="name" formControlName="name" placeholder="Full Name" />

      <label for="email">Email</label>
      <input type="email" id="email" formControlName="email" placeholder="Email" />

      <label for="phone">Phone</label>
      <input type="text" id="phone" formControlName="phone" placeholder="Phone Number" />

      <label for="address">Address</label>
      <input type="text" id="address" formControlName="address" placeholder="Address" />

      <label for="linkedIn">LinkedIn</label>
      <input type="text" id="linkedIn" formControlName="linkedIn" placeholder="LinkedIn URL" />
    </div>

    <div>
      <label for="templateStyle">Template Style</label>
      <select formControlName="templateStyle">
        <option value="Modern">Modern</option>
        <option value="Classic">Classic</option>
        <option value="Minimal">Minimal</option>
      </select>
    </div>

    <div formArrayName="certifications">
      <label>Certifications:</label>
      <div *ngFor="let certification of certifications.controls; let i = index">
        <div [formGroupName]="i">
          <input formControlName="name" placeholder="Certification Name" />
          <button type="button" (click)="removeCertification(i)">Remove</button>
        </div>
      </div>
      <button type="button" (click)="addCertification()">Add Certification</button>
    </div>

    <div formArrayName="educations">
      <label>Educations:</label>
      <div *ngFor="let education of educations.controls; let i = index">
        <div [formGroupName]="i">
          <input formControlName="institution" placeholder="Institution" />
          <input formControlName="degree" placeholder="Degree" />
          <input formControlName="fieldOfStudy" placeholder="Field Of Study" />
          <button type="button" (click)="removeEducation(i)">Remove</button>
        </div>
      </div>
      <button type="button" (click)="addEducation()">Add Education</button>
    </div>

    <!-- Experiences -->
    <div formArrayName="experiences">
      <label>Experiences:</label>
      <div *ngFor="let experience of experiences.controls; let i = index">
        <div [formGroupName]="i">
          <input formControlName="jobTitle" placeholder="Job Title" />
          <input formControlName="company" placeholder="Company" />
          <input formControlName="responsibilities" placeholder="Responsibilities" />
          <button type="button" (click)="removeExperience(i)">Remove</button>
        </div>
      </div>
      <button type="button" (click)="addExperience()">Add Experience</button>
    </div>

    <!-- Skills -->
    <div formArrayName="skills">
      <label>Skills:</label>
      <div *ngFor="let skill of skills.controls; let i = index">
        <div [formGroupName]="i">
          <input formControlName="name" placeholder="Skill Name" />
          <button type="button" (click)="removeSkill(i)">Remove</button>
        </div>
      </div>
      <button type="button" (click)="addSkill()">Add Skill</button>
    </div>


    <button type="submit" [disabled]="!resumeForm.valid">
      {{ currentResume ? 'Update Resume' : 'Create Resume' }}
    </button>
  </form>

  <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
</div>
